# 1. 빅데이터 탐색하기

## 1. 데이터에 내재된 변수의 이해와 정의

### 1. 통계학의 분류

- **기술통계학**: 자료의 특성을 쉽게 파악할 수 있도록 자료의 대푯값을 구하고 자료를 간단히 그래프로 표현하여 분석하는 것을 의미한다.
- **추측통계학**: 자료에 있는 불확실한 사실에 대한 추론을 하는 것으로 모집단에서 표본을 선출해서 선출된 표본으로 모집단의 특성을 파악하는 것이다.
- **모수통계학**: 모집단에 대한 가정을 기반으로 데이터를 분석하는 방법으로, 모집단의 특성을 정확히 파악하려는 접근이다.
- **비모수통계학**: 모집단의 분포에 대한 가정을 하지 않고, 표본을 통해 추정하는 방법으로, 데이터가 특정 분포를 따르지 않을 때 유용하다.
- **모집단**: 연구 대상이 되는 전체 집단으로, 연구자는 모집단에 대한 정보를 추론하려 한다.
- **표본집단**: 모집단에서 일정 부분을 추출한 집단으로, 표본을 통해 모집단의 특성을 추정한다.
- **모수**: 모집단의 특성이나 성질을 나타내는 수치적 값. 예: 평균, 분산 등.
- **통계량**: 표본에서 계산된 값으로, 표본 데이터를 요약하는 수치적 지표다. 예: 표본 평균, 표본 분산 등.

### 2. 자료의 분류

- **독립변수와 종속변수 분류**:
  - **독립변수**: 종속변수에 영향을 미친다고 가정하는 변수로, 실험에서 변수를 조작하는 요인이다.
  - **종속변수**: 독립변수의 영향을 받는 변수로, 실험 결과나 반응 변수이다.
  
- **질적 자료와 양적 자료**:
  - **질적 자료**: 주로 분류나 범주화가 가능한 자료로, 예: 성별, 혈액형 등.
  - **양적 자료**: 숫자로 표현될 수 있는 자료로, 예: 키, 나이, 소득 등.

- **변수의 유형 파악**:
  - **명목척도**: 범주형 변수로 순서나 크기 차이가 없는 변수 (예: 성별, 국가).
  - **서열척도**: 범주형 변수로 순서가 있는 변수 (예: 학년, 순위).
  - **간격척도**: 순서와 간격이 의미 있는 숫자 변수 (예: 온도, IQ 점수).
  - **비율척도**: 절대적인 0이 존재하며, 비율이 의미 있는 숫자 변수 (예: 키, 체중, 소득).

- **분석 가능한 자료인지 확인**:
  - 데이터가 분석 가능한 상태인지 확인하려면 먼저 자료의 품질을 점검해야 한다. 자료의 정확성, 완전성, 일관성 등이 확보되어야 한다.

- **데이터 표준화 작업 실시**:
  - **표준화**: 다양한 범위와 단위를 가진 데이터들이 있을 때, 이를 동일한 기준으로 변환하는 과정이다. 예를 들어, 다양한 크기의 수치를 0~1 사이로 변환하는 방법이 있다.
  
- **다양한 변수에 대한 정의**:
  - 각 변수는 분석 목적에 맞게 정의되어야 하며, 데이터 전처리 단계에서 변수의 역할과 특성을 명확히 파악해야 한다.

### 3. 데이터 확인

- **데이터양**: 분석에 사용할 수 있는 데이터의 양이 충분한지 확인한다. 데이터가 너무 적으면 결과의 신뢰도가 떨어질 수 있다.
  
- **이상치 판단**: 
  - **이상치**: 데이터 중에서 다른 값들과 현저하게 다른 값을 말한다. 이는 오류일 수도 있고, 실제 중요한 패턴일 수도 있다.
  - 이상치는 상자그림, Z-점수 등 다양한 방법으로 식별할 수 있다.
  
- **결측치 판단**: 
  - **결측치**: 데이터가 누락된 부분을 의미한다. 결측치를 다루는 방법으로는 해당 값을 평균이나 중간값으로 채우거나, 결측치를 제거하는 방법 등이 있다.

### 4. 이상치 판정기법

- **이상치**: 통계적으로 예상되는 범위를 벗어난 값으로, 데이터 분석에서 중요한 역할을 할 수 있다. 이상치가 중요한 패턴을 나타내는 경우도 있지만, 단순히 오류일 수 있기 때문에 정확히 판단해야 한다.
  
- **상자그림(Boxplot)**: 
  - 데이터의 분포를 시각적으로 나타내는 도구로, 이상치를 쉽게 식별할 수 있다. 상자그림에서 상자 외부의 점들은 이상치로 간주될 수 있다.
  
- **이상치 처리 방법**:
  - **삭제**: 이상치를 데이터에서 제거하는 방법.
  - **변환**: 이상치를 다른 값으로 변환하는 방법.
  - **대체**: 평균값, 중앙값 등을 사용해 이상치를 대체하는 방법.
  
- **결측치 처리 방법**:
  - **삭제**: 결측치가 있는 데이터를 아예 제거하는 방법.
  - **대체**: 결측치를 평균값, 중앙값, 또는 인근 데이터를 기반으로 대체하는 방법.
  - **예측**: 결측치를 예측 모델을 사용해 예측하여 채우는 방법.

# 분석 변수 처리

## 변수 선택 방법
- **전진선택법 (Forward Selection)**: 하나씩 변수 추가
- **후진제거법 (Backward Elimination)**: 모든 변수에서 하나씩 제거
- **단계별 선택법 (Stepwise Selection)**: 전진선택법 + 후진제거법

## 차원 축소
- **차원의 저주**: 데이터 학습 시 차원이 높아질수록 알고리즘 성능이 저하됨
- **주성분 분석 (PCA)**: 상관성이 높은 변수들의 선형 결합으로 차원을 축소하고 새로운 변수를 생성 (정방 행렬)
- **요인 분석 (Factor Analysis)**: 데이터 내부 잠재 요인을 도출하고 구조를 해석
  - **직각 회전 방식**: 요인들 사이 상관관계를 0으로 만들어 서로 독립적인 것으로 가정 (Varimax)
  - **사각 회전 방식**: 요인들 사이 상관관계를 유지 (Promax, Oblimin)
- **다차원 척도법 (MDS)**: 개체 사이의 군집을 시각적으로 표현하는 방법
- **특이값 분해 (SVD)**: MxN 크기의 비정방 행렬 분해
- **선형판별분석 (LDA)** & **독립성분분석 (ICA)**

## 요약변수 & 파생변수
- **요약변수**: 수집된 정보를 종합한 변수 (재활용성)
- **파생변수**: 기존 변수를 기반으로 새로운 변수를 생성한 것. 논리적 타당성 필요

## 수치형 변수 변환
1. **Z-score 정규화**: 평균 0, 표준편차 1로 변환
    - 공식: (현재 값 - 평균) / 표준편차
2. **최소-최대 정규화**: 값의 범위를 [0, 1]로 변환
    - 공식: (현재 값 - 최소값) / (최대값 - 최소값)
3. **로그 변환**: 값의 분포를 평탄하게 만들어주는 변환

## 범주형 변수 변환
1. **레이블 인코딩**: 데이터를 단순 정수로 변환 (0, 1, 2…)
    - *주의*: 순서가 아닌 크기로 인식될 수 있음
2. **원-핫 인코딩**: 고유값에 해당하는 칼럼만 1로 표시, 나머지는 0으로 표시
3. **타깃 인코딩**: 타깃 변수를 평균값으로 변환

## 불균형 데이터 처리
1. **가중치 균형 적용**: 불균형 데이터에 가중치를 주어 모델의 성능을 개선
    - **비용 민감 학습**: 소수 클래스에 더 많은 가중치를 주어 예측 정확도 향상
2. **언더샘플링**: 다수 클래스를 일부만 선택
3. **오버샘플링**: 소수 클래스를 복사하여 수를 늘림
    - **SMOTE**: 가상 직선을 활용해 소수 클래스 데이터를 합성하는 오버샘플링 기법

---

# 데이터 탐색

## 데이터 탐색 기초
- **EDA (탐색적 자료 분석)**: 데이터를 이해하고 의미 있는 관계를 찾아내는 과정
    - **주제**: 
      - 저항성(이상치 영향 적게 받음)
      - 잔차 계산
      - 자료 변수의 재표현
      - 그래프를 통한 현시성
- **상관 분석**
  - **피어슨 상관 분석**: 양적 척도 (연속형 변수, 선형 관계)
  - **스피어만 상관 분석**: 서열 척도 (비선형적 관계)
- **첨도와 왜도**
  1. **첨도**: 자료 분포의 뾰족함 정도
      - 0 = 정규분포, 값이 클수록 더 뾰족함 (3을 기준으로 정규분포 형태를 판단)
  2. **왜도**: 자료 분포의 비대칭 정도
      - 0보다 크면 오른쪽으로 꼬리 긴 형태 (최빈값 < 중앙값 < 평균값)
      - 0보다 작으면 왼쪽으로 꼬리 긴 형태 (최빈값 > 중앙값 > 평균값)

## 고급 데이터 탐색
- **시공간 데이터**: 공간 정보 + 시간 흐름
  - 활용: 시공간 패턴을 통한 예측, 지도를 통한 위치 정보 분석
- **다변량 데이터 탐색 방법**
  - **주성분 분석(PCA)**: 차원 축소 기법
  - **다차원 척도법(MDS)**: 데이터 간 거리를 보존하여 차원 축소
  - **로컬선형임베딩 (LLE)**: 비선형적 데이터의 차원 축소

---

# 통계기법 이해

## 기술통계
### 표본 추출 방법
1. **랜덤 추출법**: 무작위로 표본을 추출
2. **계통 추출법**: 일정 간격으로 표본을 추출
3. **집락 추출법**: 군집을 나누어 군집 내에서 랜덤으로 표본을 추출
   - 군집 내 이질적, 군집 간 동질적
4. **층화 추출법**: 유사한 요소끼리 층을 묶어 층별로 표본을 추출
   - 군집 내 동질적, 군집 간 이질적
5. **복원 / 비복원 추출**

### 확률분포
- **이산 확률분포**: 값을 셀 수 있는 분포
  - **이산 균등분포**: 모든 값이 동일한 확률
  - **베르누이분포**: 2가지 결과
  - **이항분포**: n번의 독립적 베르누이 시행
  - **기하분포**: 첫 성공까지의 시도 횟수
  - **다항분포**: 여러 값을 가지는 확률변수의 분포
  - **포아송분포**: 단위 공간 내 사건 발생 횟수
- **연속 확률분포**: 값을 셀 수 없는 분포
  - **정규분포**: Z검정
  - **t분포**: 두 집단 평균 차이 비교 (T검정)
  - **카이제곱분포**: 동질성 검정, 모분산 검정
  - **F분포**: 두 집단 분산 검정
  - **지수분포**

### 표본집단의 표본분포
- 표본분포의 평균은 모집단의 평균과 같음
- 표본분포의 분산은 모집단 분산을 표본 크기로 나눈 것과 같음

### 중심극한정리
- 표본 크기가 충분히 크면 (n ≥ 30), 표본분포는 정규분포에 가까워짐

---

## 추론통계

### 점추정
- 모집단의 특성을 추정하는 방법 (특정 값으로 추정)

### 구간추정
- 모집단이 특정 구간에 있을 확률을 추정 (95%, 99% 신뢰구간 사용)

### 모평균의 구간 추정
1. 모집단 분산을 알고 있는 경우: 정규분포 사용
2. 모집단 분산을 모르는 경우: t분포 사용 (자유도 = n-1)

---

## 가설검정

### 기본 개념
- **귀무가설(H0)**: 일반적으로 생각하는 가설
- **대립가설(H1)**: 증명하고자 하는 가설
- **유의수준(a)**: 1종 오류를 범할 확률의 허용 한계
- **기각역**: 귀무가설이 기각되고 대립가설이 채택되는 검정 통계량의 영역

### 오류 유형
- **1종 오류 (판매자 오류)**: 귀무가설이 사실인데 거짓이라고 판정
- **2종 오류 (소비자 오류)**: 귀무가설이 거짓인데 사실이라고 판정

## 가설검정 문제 풀이 방법

1. **귀무가설 (H₀)** / **대립가설 (H₁)** 설정
   - **귀무가설 (H₀)**: 통계적으로 검증하려는 기본 가설. 보통 "변화가 없다", "차이가 없다", "효과가 없다" 등의 형태로 설정합니다.
   - **대립가설 (H₁)**: 귀무가설에 반하는 가설. 보통 "변화가 있다", "차이가 있다", "효과가 있다" 등의 형태로 설정합니다.

2. **양측검정 혹은 단측검정 확인**
   - **양측검정 (Two-tailed Test)**: "값이 같지 않다"와 같은 상황에서 사용. 귀무가설을 기각하려면 값이 두 방향(큰 값 혹은 작은 값) 모두에서 특정 범위를 벗어나야 합니다.
     - 예시: `H₀: μ = μ₀`, `H₁: μ ≠ μ₀`
   - **단측검정 (One-tailed Test)**: "값이 크다" 혹은 "값이 작다"와 같은 상황에서 사용. 귀무가설을 기각하려면 값이 한 방향으로만 특정 범위를 벗어나야 합니다.
     - 예시: `H₀: μ ≤ μ₀`, `H₁: μ > μ₀` (단측 오른쪽 검정)
     - 예시: `H₀: μ ≥ μ₀`, `H₁: μ < μ₀` (단측 왼쪽 검정)

3. **일표본 혹은 이표본 확인**
   - **일표본 검정 (One-sample test)**: 모집단의 평균이 특정 값과 다른지 확인하려는 경우 사용.
     - 예시: 특정 제품의 평균 길이가 10cm와 다른지 확인
   - **이표본 검정 (Two-sample test)**: 두 모집단 간 평균 차이를 비교하려는 경우 사용.
     - 예시: 두 그룹 간 평균 차이 확인 (A, B 두 집단의 평균 수명 차이)

4. **검정통계량 계산과 기각역 판단**
   - **검정통계량 (Test Statistic)**: 주어진 데이터에서 계산된 값으로, 이를 기반으로 귀무가설을 기각할지 말지를 결정합니다. 주로 **Z-통계량**이나 **t-통계량**이 사용됩니다.
   - **기각역 (Rejection Region)**: 검정통계량이 기각역에 해당하면 귀무가설을 기각하고 대립가설을 채택합니다.
     - Z검정이나 t검정을 사용할 때, 기각역은 유의수준(α)에 따라 결정됩니다. 예를 들어, α = 0.05일 때, 95% 신뢰구간에 해당하는 구간을 벗어나면 귀무가설을 기각합니다.

5. **t검정인 경우**: 단일표본, 대응표본, 독립표본에 따라 구분하여 검정을 진행
   - **단일표본 t검정 (One-sample t-test)**: 하나의 표본 평균이 모집단 평균과 다른지 확인합니다.
     - 예시: `H₀: μ = μ₀`, `H₁: μ ≠ μ₀`
   - **대응표본 t검정 (Paired t-test)**: 동일한 집단에서 두 시간점 혹은 두 조건에 대한 평균 차이를 비교합니다. 보통 반복 측정 데이터에서 사용됩니다.
     - 예시: `H₀: μ₁ = μ₂` (시간1과 시간2의 평균 차이가 없다), `H₁: μ₁ ≠ μ₂`
   - **독립표본 t검정 (Independent t-test)**: 서로 다른 두 집단의 평균 차이를 비교합니다. 독립적인 두 집단에서 데이터를 수집할 때 사용됩니다.
     - 예시: `H₀: μ₁ = μ₂`, `H₁: μ₁ ≠ μ₂`

---

### t검정 적용 예시
#### 1. 단일표본 t검정
- **문제**: 한 회사의 직원들의 월급이 평균 3,000,000원인지 확인하고 싶다.
- **귀무가설**: H₀: μ = 3,000,000
- **대립가설**: H₁: μ ≠ 3,000,000
- **통계량 계산**: t-통계량을 계산하고, 유의수준(예: α = 0.05)과 비교하여 귀무가설을 기각할지 결정합니다.

#### 2. 대응표본 t검정
- **문제**: 특정 약물이 환자의 혈압을 개선하는지 확인하고자 한다. 약물을 복용하기 전과 후의 혈압을 측정하였다.
- **귀무가설**: H₀: μ₁ = μ₂ (혈압 변화가 없다)
- **대립가설**: H₁: μ₁ ≠ μ₂ (혈압 변화가 있다)
- **통계량 계산**: 각 데이터 간 차이를 계산하고 t-통계량을 구한 후, 기각역을 설정합니다.

#### 3. 독립표본 t검정
- **문제**: 남성과 여성의 월급 차이를 비교하고자 한다.
- **귀무가설**: H₀: μ₁ = μ₂ (남성과 여성의 월급 차이가 없다)
- **대립가설**: H₁: μ₁ ≠ μ₂ (남성과 여성의 월급 차이가 있다)
- **통계량 계산**: 각 집단의 평균과 표준편차를 계산하고, t-통계량을 구하여 기각역과 비교합니다.

---

### 기각 여부 결정
- **유의수준 (α)**: 일반적으로 0.05 (5%)를 사용하며, 이보다 작은 p-value가 나오면 귀무가설을 기각합니다.
- **p-value**: 검정 통계량에 대응하는 p-value를 구하고, 이 값을 유의수준과 비교합니다. 만약 p-value가 유의수준보다 작으면 귀무가설을 기각하고 대립가설을 채택합니다.

---

### 결론 도출
- **귀무가설을 기각할 수 있을 때**: 대립가설을 채택하고, 연구 결과는 통계적으로 유의미하다.
- **귀무가설을 기각할 수 없을 때**: 연구 결과는 통계적으로 유의미하지 않다고 판단하며, 귀무가설을 유지합니다.